import { Injectable } from '@angular/core';
import { Mission } from './mission.class';
import { MissionConfig, MissionsService } from './missions.service';
import { TimeEnum } from '../models/time.list.enum';
import { RangService } from '../../rangs/services/rang.service';
import { SkinsEnum } from '../models/skins.enum';

@Injectable({
  providedIn: 'root',
})
export class CommonMissions {
  constructor(
    private mission: MissionsService,
    private rang: RangService,
  ) { }

  getIncomeLevel(income: number) {
    return Math.ceil(Math.log2(income / 100000));
  }

  private commonMissions: MissionConfig[] = [
    {
      id: 'everyday-hero',
      title:
        'üéÅ –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –º–∏—Å—Å–∏–∏ –≤ —Ç–µ—á–µ–Ω–∏–∏ —Å—É—Ç–æ–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —ç—Ç—É –Ω–∞–≥—Ä–∞–¥—É',
      step: 100,
      skin: SkinsEnum[this.getIncomeLevel(this.rang.getXp())],
      refreshTime: TimeEnum.DAY,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 1, amount: 5, xp: 1000 },
      autocomplete: true,
    },

    //–ü—Ä–∏–µ–º –¥–æ–±–∞–≤–æ–∫
    {
      id: 'antidepresant',
      title: '‚ù§Ô∏è  –í—ã–ø–∏—Ç—å –∞–Ω—Ç–∏–¥–µ–ø—Ä–µ—Å–∞–Ω—Ç',
      step: 100,
      refreshTime: 0,
      respawnTime: 24 * TimeEnum.HOUR,
      reward: { keyType: 4, amount: 1, xp: 10 },
      openHours: [9, 24],
    },
    {
      id: 'b-vitamins',
      title: 'üç´ –í—ã–ø–∏—Ç—å –≤–∏—Ç–∞–º–º–∏–Ω–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –ë',
      step: 100,
      refreshTime: 0,
      respawnTime: 24 * TimeEnum.HOUR,
      reward: { keyType: 4, amount: 1, xp: 10 },
      openHours: [0, 24],
    },
    {
      id: 'gainer',
      title: 'üèãÔ∏è‚Äç‚ôÇÔ∏è  –ü—Ä–∏–Ω—è—Ç—å –≥–µ–π–Ω–µ—Ä',
      step: 100,
      refreshTime: 0,
      respawnTime: 24 * TimeEnum.HOUR,
      reward: { keyType: 4, amount: 1, xp: 10 },
      openHours: [9, 24],
    },
    {
      id: 'ptorein',
      title: 'üèãÔ∏è‚Äç‚ôÇÔ∏è  –ü—Ä–∏–Ω—è—Ç—å –ø—Ä–æ—Ç–µ–∏–Ω',
      step: 100,
      refreshTime: 0,
      respawnTime: 24 * TimeEnum.HOUR,
      reward: { keyType: 4, amount: 1, xp: 10 },
      openHours: [14, 24],
    },
    {
      id: 'kalogen',
      title: 'üèãÔ∏è‚Äç‚ôÇÔ∏è  –ü—Ä–∏–Ω—è—Ç—å –∫—Ä–µ–∞—Ç–∏–Ω',
      step: 100,
      refreshTime: 0,
      respawnTime: 24 * TimeEnum.HOUR,
      reward: { keyType: 4, amount: 1, xp: 10 },
      openHours: [18, 24],
    },

    //–ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    {
      id: 'clean-memos',
      title: '‚ù§Ô∏è  –û—Ç—á–∏—Å—Ç–∏—Ç—å Memos',
      step: 100,
      refreshTime: 0,
      respawnTime: 6 * TimeEnum.HOUR,
      reward: { keyType: 0, amount: 1, xp: 40 },
      maxPerDay: 4,
    },
    {
      id: 'take-shower-jump',
      title: 'üöø –ü—Ä–∏–Ω—è—Ç—å –¥—É—à + —Ö–æ–ª–æ–¥–Ω—ã–π –¥—É—à + 100 —Ä–∞–∑ –ø–æ–ø—Ä—ã–≥–∞—Ç—å',
      step: 50,
      refreshTime: TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
    },
    {
      id: 'calf-muscles',
      title: 'üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏–∫—Ä–æ–Ω–æ–∂–Ω—ã—Ö –º—ã—à—Ü - 100 —Ä–∞–∑',
      step: 50,
      refreshTime: 10 * TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 100 }, //1xp –∑–∞ —Ä–∞–±–æ—Ç—É
      stars: 1,
    },
    {
      id: 'eat-apple',
      title: 'üçè –°—ä–µ—Å—Ç—å —è–±–ª–æ–∫–æ',
      step: 100,
      refreshTime: TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 10 },
    },

    //–ö–∞—Ç–∞
    {
      id: 'shiro-obi-no-kata',
      title: 'ü•ã‚¨úÔ∏è –°–¥–µ–ª–∞—Ç—å –®–∏—Ä–æ –û–±–∏ –ù–æ –ö–∞—Ç–∞',
      step: 50,
      refreshTime: 3 * TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 2,
    },
    {
      id: 'ao-obi-no-kata',
      title: 'ü•ãüü¶ –°–¥–µ–ª–∞—Ç—å –ê–æ –û–±–∏ –ù–æ –ö–∞—Ç–∞',
      step: 50,
      refreshTime: 3 * TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1,
    },

    //–°–∏–ª–æ–≤—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
    {
      id: 'push-ups',
      title: 'üí™ –°–¥–µ–ª–∞—Ç—å 10 –æ—Ç–∂–∏–º–∞–Ω–∏–π',
      step: 20,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1, //–∑–∞ –∫–∞–∂–¥—ã–µ 20 –æ—Ç–∂–∏–º–∞–Ω–∏–π (20/100 => 10/50 => 1/5)
    },
    {
      id: 'abs',
      title: 'üí™ –°–¥–µ–ª–∞—Ç—å 20 —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏–π',
      step: 20,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 2,
    },
    {
      id: 'squats',
      title: 'üí™ –°–¥–µ–ª–∞—Ç—å 10 –ø—Ä–∏—Å–µ–¥–∞–Ω–∏–π',
      step: 20,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1,
    },
    {
      id: 'bicycle-exercise',
      title: 'üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "–í–µ–ª–∏–æ—Å–∏–ø–µ–¥" - –º–∞—Ö–∏ –Ω–æ–≥–∞–º–∏ –ª—ë–∂–∞ 100 —Ä–∞–∑',
      step: 20,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1,
    },
    {
      id: 'leg-swinging',
      title: 'üí™ –ú–∞—Ö–∏ –Ω–æ–≥–∞–º–∏ - 20 –∫–∞–∂–¥–æ–π –Ω–æ–≥–æ–π',
      step: 50,
      refreshTime: 10 * TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 25 },
      stars: 2,
    },
    {
      id: 'hand-training',
      title: 'üí™ 100 —Å–∂–∏–º–∞–Ω–∏–π –∫—É–ª–∞–∫–æ–≤ - —Å —ç—Å–ø–∞–Ω–¥–µ—Ä–æ–º',
      step: 10,
      refreshTime: 1 * TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 20 },
      stars: 2,
    },
    {
      id: 'fist-training',
      title: 'üí™ 2-—Ö –º–∏–Ω—É—Ç–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ –∫–æ—Å—Ç—è—à–µ–∫ –∫—É–ª–∞–∫–æ–≤',
      step: 20,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 20 },
      maxPerDay: 10,
      stars: 1,
    },
    {
      id: 'back-training',
      title:
        'üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –º—ã—à—Ü —Å–ø–∏–Ω—ã —Å 2 –¥–∏—Å–∫–∞–º–∏ –ø–æ 2 –∫–≥ - 3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 20 —Ä–∞–∑',
      step: 50,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 20 },
      stars: 1,
    },
    {
      id: 'kegel-training',
      title: 'üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∫–µ–≥–µ–ª—è 100 —Ä–∞–∑ –∏ –Ω–æ–≥–∏ –Ω–∞–∑–∞–¥ 100 —Ä–∞–∑ –∫–∞–∂–¥–∞—è',
      step: 50,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1,
    },
    {
      id: 'elbow-up-downs',
      title: 'üí™ –í–≤–µ—Ä—Ö-–≤–Ω–∏–∑ –Ω–∞ –∫–æ–ª–µ–Ω—è—Ö x100',
      step: 50,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 20 },
      stars: 1,
    },
    {
      id: 'legs-statics',
      title: 'üí™ –î–µ—Ä–∂–∞—Ç—å –Ω–æ–≥–∏ –Ω–∞ –≤–µ—Å—É - –≤–ø–µ—Ä–µ–¥ –∏ –≤–±–æ–∫ 1 –º–∏–Ω—É—Ç—É',
      step: 50,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 60 },
      stars: 1,
    },

    //–†–∞—Å—Ç—è–∂–∫–∞
    {
      id: 'kitchen-stretching',
      title: 'ü§∏ –°–¥–µ–ª–∞—Ç—å —Ä–∞—Å—Ç—è–∂–∫—É –Ω–æ–≥ –Ω–∞ –∫—É—Ö–Ω–µ x6',
      step: 20,
      refreshTime: 20 * TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      maxPerDay: 2,
      stars: 3,
    },
    {
      id: 'carpet-stretching',
      title: 'üßò –°–¥–µ–ª–∞—Ç—å —Ä–∞—Å—Ç—è–∂–∫—É –Ω–æ–≥ –Ω–∞ –∫–æ–≤—Ä–∏–∫–µ - —Å –¥–∏—Å–∫–∞–º–∏ –≥–∞–Ω—Ç–µ–ª–µ–π 2x3',
      step: 50,
      refreshTime: 10 * TimeEnum.SECOND,
      respawnTime: 40 * TimeEnum.MINUTE,
      reward: { keyType: 0, amount: 1, xp: 120 },
      level: 'üü¶ 125¬∞',
      stars: 3,
      maxPerDay: 3,
    },
    {
      id: 'long-split',
      title: 'ü¶µ –†–∞—Å—Ç—è–∂–∫–∞ - –ø—Ä–æ–¥–æ–ª—å–Ω—ã–π —à–ø–∞–≥–∞—Ç –Ω–∞ –ø–æ–ª—É 1x4',
      step: 50,
      refreshTime: 10 * TimeEnum.SECOND,
      respawnTime: 40 * TimeEnum.MINUTE,
      reward: { keyType: 0, amount: 1, xp: 120 },
      level: 'üü¶ 125¬∞',
      stars: 3,
      maxPerDay: 3,
    },
    {
      id: 'transverse-split',
      title: 'ü§∏ –†–∞—Å—Ç—è–∂–∫–∞ - –ø–æ–ø–µ—Ä–µ—á–Ω—ã–π —à–ø–∞–≥–∞—Ç —É —Å—Ç–µ–Ω–∫–∏ - 2x4',
      step: 50,
      refreshTime: TimeEnum.SECOND,
      respawnTime: TimeEnum.SECOND,
      reward: { keyType: 0, amount: 1, xp: 120 },
      level: 'üü¶üü° 124¬∞',
      stars: 3,
      maxPerDay: 5,
    },
    {
      id: 'spring-exc',
      title: 'ü§∏ –†–∞—Å—Ç—è–∂–∫–∞ - –Ω–∞ –∫–æ–≤—Ä–∏–∫–µ –≥–æ–ª–æ–≤—É –∫ –ø–æ–ª—É + –ø—Ä—É–∂–∏–Ω–∫–∞ 1x4',
      step: 50,
      refreshTime: 10 * TimeEnum.SECOND,
      respawnTime: 40 * TimeEnum.MINUTE,
      reward: { keyType: 0, amount: 1, xp: 120 },
      maxPerDay: 5,
      skin: 'epic/emerald.webp',
      stars: 1,
    },

    //–ú–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

    {
      id: 'memos-add-card',
      title: '‚ù§Ô∏è  Memos - –¥–æ–±–∞–≤–∏—Ç—å 1 –∫–∞—Ä—Ç–æ—á–∫—É',
      step: 100,
      refreshTime: TimeEnum.SECOND,
      respawnTime: TimeEnum.SECOND,
      reward: { keyType: 0, amount: 1, xp: 40 },
      maxPerDay: 10,
      stars: 1,
    },
    {
      id: 'duolingo-japanese-practice',
      title: 'üáØüáµ 1 –ø—Ä–∞–∫—Ç–∏–∫–∞ —è–ø–æ–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –Ω–∞ –¥—É–æ–ª–∏–Ω–≥–æ',
      step: 25,
      refreshTime: TimeEnum.SECOND,
      respawnTime: 12 * TimeEnum.SECOND,
      reward: { keyType: 0, amount: 2, xp: 20 },
      level: '‚¨úÔ∏èüîµ',
      maxPerDay: 5,
      stars: 1,
    },
    {
      id: 'duolingo-new-japanese-lesson',
      title: 'üáØüáµ –°–¥–µ–ª–∞—Ç—å 1 –Ω–æ–≤—ã–π —É—Ä–æ–∫ —è–ø–æ–Ω—Å–∫–æ–≥–æ –Ω–∞ –¥—É–æ–ª–∏–Ω–≥–æ',
      step: 25,
      refreshTime: TimeEnum.SECOND,
      respawnTime: TimeEnum.SECOND,
      reward: { keyType: 0, amount: 2, xp: 40 },
      level: '‚¨úÔ∏èüîµ',
      maxPerDay: 5,
      stars: 1,
    },
    {
      id: 'finish-morsecode-level',
      title: '‚õµÔ∏è –ó–∞–∫–æ–Ω—á–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –º–æ—Ä—è–∑–∫–∏',
      step: 100,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.MINUTE,
      reward: { keyType: 0, amount: 1, xp: 120 },
      maxPerDay: 5,
      stars: 2,
    },
    {
      id: 'rubics-cube',
      title: 'üß† –°–æ–±—Ä–∞—Ç—å –∫—É–±–∏–∫ —Ä—É–±–∏–∫–∞',
      step: 50,
      refreshTime: 3 * TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 1, //1 –º–∏–Ω—É—Ç–∞ (1 –∑–≤–µ–∑–¥–∞), 30 —Å–µ–∫ (2), 15 —Å–µ–∫(3), 10 —Å–µ–∫ (4), 5 —Å–µ–∫ (5)
    },
    {
      id: 'reading',
      title: 'üìñ –ü—Ä–æ—á–∏—Ç–∞—Ç—å 1 –≥–ª–∞–≤—É –∫–Ω–∏–≥–∏',
      step: 50,
      refreshTime: TimeEnum.SECOND,
      respawnTime: TimeEnum.SECOND,
      reward: { keyType: 0, amount: 2, xp: 400 },
      maxPerDay: 10,
      stars: 1,
    },
    {
      id: 'raptorium',
      title: 'üßë‚Äçüíª –£–±–∏—Ç—å –¥–µ–º–æ–Ω–∞ –≤ Raptorium',
      step: 50,
      refreshTime: TimeEnum.HOUR,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 20 },
      stars: 4,
    },
    {
      id: 'regexp',
      title: 'üßë‚Äçüíª –†–µ—à–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ regexp –∑–∞–¥–∞–Ω–∏–µ',
      step: 50,
      refreshTime: TimeEnum.MINUTE,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 40 },
      stars: 3,
    },
    {
      id: 'chess-training',
      title: 'üß† –†–µ—à–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –ø–æ —à–∞—Ö–º–∞—Ç–∞–º –Ω–∞ lichess.org (–≤—Å–µ–≥–æ 10)',
      step: 10,
      refreshTime: 10 * TimeEnum.SECOND,
      respawnTime: TimeEnum.DAY,
      reward: { keyType: 0, amount: 1, xp: 10 },
      stars: 1,
    },
  ];

  public get(): Mission[] {
    let xp = 0;
    this.commonMissions.forEach(
      (mission) => (xp += mission.reward.xp * (100 / mission.step)),
    );
    return this.commonMissions.map((mission) => this.mission.make(mission));
  }
}
